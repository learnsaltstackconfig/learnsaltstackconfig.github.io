<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>File Server - Learn SaltStack Config</title><meta name=description content="Part of VMware vRealize Automation"><meta name=generator content="Hugo 0.83.1"><link href=https://learnsaltstackconfig.github.io/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://learnsaltstackconfig.github.io/Config/File_Server/><link rel=stylesheet href=https://learnsaltstackconfig.github.io/css/theme.css><link rel=stylesheet href=/css/lightbox.min.css><link rel=stylesheet href=/css/custom.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script><link rel=stylesheet href=https://learnsaltstackconfig.github.io/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script src=https://learnsaltstackconfig.github.io/js/bundle.js></script><script src=/js/lightbox.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-L018Y1N17W"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-L018Y1N17W')</script><style>:root{--custom-font-color:#0065ab;--custom-background-color:#FFFFFF}</style><meta property="og:title" content="File Server"><meta property="og:description" content="Part of VMware vRealize Automation"><meta property="og:type" content="website"><meta property="og:url" content="https://learnsaltstackconfig.github.io/Config/File_Server/"><meta property="og:image" content="https://learnsaltstackconfig.github.io/images/og-image.png"><meta property="og:site_name" content="Learn SaltStack Config"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://learnsaltstackconfig.github.io/images/og-image.png"><meta name=twitter:title content="File Server"><meta name=twitter:description content="Part of VMware vRealize Automation"><meta itemprop=name content="File Server"><meta itemprop=description content="Part of VMware vRealize Automation"></head><body><div class=container><header><div class=header-image><img src=/images/saltstack-config.png alt="Learn SaltStack Config"></div><div class=header><div class=header-h1><h1 class=header-h1>Learn SaltStack Config</h1></div><div class=header-description><p class=description>Part of VMware vRealize Automation</p></div></div></header><div class=content-container><main><h1>File Server</h1><p>Welcome to the File Server Page</p><img src=fileservermain.png alt=FileServer width=700 height=800><h1 style=color:#000;font-size:20px>Overview</h1><p>The File Server section is where you can create state files to manage your infrastructure. You can post .sls files, scripts, configuration files and files that you may want to distribute to minions. You can also create them in a variety of scripting languages such as YAML, python, json etc. These files can be accessed via jobs or ad-hoc commands from within SaltStack Config.</p><p>The File Server consists of <a href=https://docs.saltproject.io/en/latest/topics/tutorials/starting_states.html>state files</a> that declare the configuration of your infrastructure.</p><p>When you create state files within this section they are stored in the SaltStack Config postgres database. The file server also provides a tree like structure to place files and scripts, then those can be called by other state files. For instance if you have a state file that pushes a configuration file down to a minion the state could look something like this:<br></br><img src=/Config/File_Server/samplescriptstate.png></p><p>Basically the line of code above instructs Salt to push that file down and the source starts with salt:// because that points to the <i>base</i> file roots location within the File Server tree structure. You can store config files in the file server then push them down to the minion, or call scripts via <a href=https://docs.saltproject.io/en/latest/ref/states/all/salt.states.cmd.html><i>cmd.script</i></a> command to locally execute a script that is stored in the File Server.</p><p>When you create state files you can then create jobs to run them. Within the Config sections there is a Jobs link where you can go to create jobs.</p><p>If you look at the top of the File Server page you will see a dropdown that points to environments then a path section.<br></br><img src=/Config/File_Server/fileserverenvpath.png><br></br>The dropdown will allow you to choose an environment or you can create your own by typing in a new name. This will allow you to seperate out various environments in how you structure you state files. You may have a Dev section or a Prod section.</p><p>The path is the folder and file name where you want to store the file. So in example above the init.sls file will be created in the /base/apache folder.</p><p>You can also run these state files from the CLI on the salt master that is connected to the SaltStack Config via the eAPI Plugin. From the CLI you can run a remote execution commmand to run the state file:</p><p><code>salt &lsquo;*&rsquo; state.apply apache test=True</code></p><p>There are some state file examples and tips here as well <a href=https://blogs.vmware.com/management/2021/06/getting-started-with-saltstack-config-part-1-creating-state-files.html>Getting Started with SaltStack Config: State Files Blog</a></p><h1 style=color:#000;font-size:20px>Salt Environments</h1><p>One thing you will notice in the interface is a dropdown with two defaults environemtns: <i>base</i> and <i>sse</i>. The <i>base</i> environment is essentially the default &ldquo;file_roots&rdquo; location for SaltStack Config. In otherwords this is where the system will look for files by default (ex. top files, when source is salt://). You can also create your own environments by simply typing in a custom environment name into the dropdown field and pressing enter.<br><br><img src=/Config/File_Server/envdropdown.png width=600 height=700><br>Creating custom environments can be useful if you want to seperate out workstreams or just organize your state files more logically. Also if you want to execute a state file from the CLI and that state file is not in base then you will need to specify the environment.</p><p><code>salt &lsquo;*&rsquo; state.apply apache saltenv=dev test=True</code></p><p>The path section is just the folder and name of the file you are creating. You can either create a new directory or create a file that will go into an existing directory.<br><br><img src=/Config/File_Server/pathsection.png width=500 height=600><br>Then the file would be located in the /opencart/files directory.<br><br><img src=/Config/File_Server/treestruct.png width=250 height=450><br><br></p><h1 style=color:#000;font-size:20px>Accessing the State Files</h1><br>Once you have created the state files in the file server, you can access them for execution using a couple of methodologies. One way is to create jobs that call the states, you can learn more about jobs here. Admins can also call these state files via the CLI like you see above on this page.<div class=edit-meta>Last updated on 18 Aug 2021<br><a href=https://github.com/cmbu-tmm-sites/learnsaltstackconfig/edit/main/content/Config/File_Server/_index.md class=edit-page><i class="fas fa-pen-square"></i>&nbsp;Edit on GitHub</a></div><nav class=pagination><a class="nav nav-prev" href=https://learnsaltstackconfig.github.io/Config/Pillars/ title=Pillars><i class="fas fa-arrow-left" aria-hidden=true></i>&nbsp;Prev - Pillars</a>
<a class="nav nav-next" href=https://learnsaltstackconfig.github.io/Compliance/ title=Compliance>Next - Compliance <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme adapted from <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li><a href=https://learnsaltstackconfig.github.io>Home</a></li><li><a href=https://learnsaltstackconfig.github.io/Dashboard/>Dashboard</a></li><li><a href=https://learnsaltstackconfig.github.io/Reports/>Reports</a></li><li><a href=https://learnsaltstackconfig.github.io/Minions/>Minions</a></li><li class=has-sub-menu><a href=https://learnsaltstackconfig.github.io/Minion_Keys/>Minion Keys<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learnsaltstackconfig.github.io/Minion_Keys/Accepted/>Accepted</a></li><li><a href=https://learnsaltstackconfig.github.io/Minion_Keys/Pending/>Pending</a></li><li><a href=https://learnsaltstackconfig.github.io/Minion_Keys/Rejected/>Rejected</a></li><li><a href=https://learnsaltstackconfig.github.io/Minion_Keys/Denied/>Denied</a></li></ul></li><li class=has-sub-menu><a href=https://learnsaltstackconfig.github.io/Activity/>Activity<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learnsaltstackconfig.github.io/Activity/Completed/>Completed</a></li><li><a href=https://learnsaltstackconfig.github.io/Activity/In_Progress/>In Progress</a></li><li><a href=https://learnsaltstackconfig.github.io/Activity/Upcoming/>Upcoming</a></li></ul></li><li class="parent has-sub-menu"><a href=https://learnsaltstackconfig.github.io/Config/>Config<span class="mark opened">-</span></a><ul class=sub-menu><li><a href=https://learnsaltstackconfig.github.io/Config/Jobs/>Jobs</a></li><li><a href=https://learnsaltstackconfig.github.io/Config/Schedules/>Schedules</a></li><li><a href=https://learnsaltstackconfig.github.io/Config/Pillars/>Pillars</a></li><li class="parent active"><a href=https://learnsaltstackconfig.github.io/Config/File_Server/>File Server</a></li></ul></li><li><a href=https://learnsaltstackconfig.github.io/Compliance/>Compliance</a></li><li><a href=https://learnsaltstackconfig.github.io/Vulnerability/>Vulnerability</a></li><li class=has-sub-menu><a href=https://learnsaltstackconfig.github.io/Settings/>Settings<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learnsaltstackconfig.github.io/Settings/User_Preferences/>User Preferences</a></li><li><a href=https://learnsaltstackconfig.github.io/Settings/Connectors/>Connectors</a></li></ul></li><li class=has-sub-menu><a href=https://learnsaltstackconfig.github.io/Administration/>Administration<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learnsaltstackconfig.github.io/Administration/Local_Users/>Local Users</a></li><li><a href=https://learnsaltstackconfig.github.io/Administration/Authentication/>Authentication</a></li><li><a href=https://learnsaltstackconfig.github.io/Administration/Roles/>Roles</a></li><li><a href=https://learnsaltstackconfig.github.io/Administration/SecOps/>SecOps</a></li><li><a href=https://learnsaltstackconfig.github.io/Administration/Master_Keys/>Master Keys</a></li></ul></li><li class=has-sub-menu><a href=https://learnsaltstackconfig.github.io/Learn_in_5s/>Learn in 5s<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learnsaltstackconfig.github.io/Learn_in_5s/Patching_and_Updating_Windows_with_SaltStack/>Patching and Updating Windows with SaltStack</a></li></ul></li><li class=has-sub-menu><a href=https://learnsaltstackconfig.github.io/References/>References<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=https://learnsaltstackconfig.github.io/References/State_Files/>State Files</a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>